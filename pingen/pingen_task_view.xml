<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data noupdate="0">

    <record id="view_pingen_task_tree" model="ir.ui.view">
      <field name="name">pingen.task.tree</field>
      <field name="model">pingen.task</field>
      <field name="type">tree</field>
      <field name="arch" type="xml">
        <tree string="Pingen Task">
          <field name="name"/>
          <field name="datas_fname"/>
          <field name="pingen_send"/>
          <field name="pingen_speed"/>
          <field name="pingen_color"/>
          <field name="state"/>
        </tree>
      </field>
    </record>

    <record id="view_pingen_task_form" model="ir.ui.view">
      <field name="name">pingen.task.form</field>
      <field name="model">pingen.task</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form string="Pingen Task">
          <group colspan="4" col="6">
            <field name="name" readonly="True"/>
            <field name="type" readonly="True"/>
            <field name="company_id" readonly="True" groups="base.group_multi_company" widget="selection"/>
          </group>
          <notebook colspan="4">
            <page string="Pingen.com">
              <separator string="Options" colspan="4"/>
              <newline />
              <group col="2" colspan="2">
                <field name="pingen_send" attrs="{'readonly': [('state', 'in', ['sendcenter', 'sent'])]}"/>
                <field name="pingen_speed" attrs="{'readonly': [('state', 'in', ['sendcenter', 'sent'])], 'required': [('pingen_send', '=', True)]}"/>
                <field name="pingen_color" attrs="{'readonly': [('state', 'in', ['sendcenter', 'sent'])]}"/>
              </group>

              <separator string="Dates" colspan="4"/>
              <newline />
              <group col="2" colspan="2">
                <field name="date"/>
                <field name="push_date"/>
              </group>

              <separator string="Errors" colspan="4"/>
              <newline />
              <group col="2" colspan="2">
                <field nolabel="1" name="last_error_message"/>
              </group>

              <separator string="Actions" colspan="4"/>
              <newline />

              <group col="2" colspan="2">
                <button name="push_to_pingen" type="object"
                  states="pending,error,pingen_error"
                  string="Push to pingen.com" icon="terp-camera_test"/>
                <button name="ask_pingen_send" type="object"
                  states="pushed"
                  string="Ask pingen.com to send the document" icon="terp-camera_test"/>
              </group>
            </page>
            <page string="Attachment">
              <group col="4" colspan="4">
                <separator string="Data" colspan="4"/>
                <newline />
                <group col="2" colspan="4" attrs="{'invisible':[('type','=','url')]}">
                  <field name="datas" filename="datas_fname" readonly="True"/>
                  <field name="datas_fname" select="1" readonly="True"/>
                </group>
                <group col="2" colspan="4" attrs="{'invisible':[('type','=','binary')]}">
                  <field name="url" widget="url" readonly="True"/>
                </group>
              </group>
              <group col="2" colspan="4">
                <separator string="Attached To" colspan="2"/>
                <field name="attachment_id"/>
              </group>
            </page>
          </notebook>

          <field name="state" widget="statusbar"
            statusbar_visible="pending,pushed,sent"
            statusbar_colors='{"error":"red","pingen_error":"red","canceled":"grey","pushed":"blue","sent":"green"}'/>
        </form>
      </field>
    </record>

    <record id="view_pingen_task_search" model="ir.ui.view">
      <field name="name">pingen.task.search</field>
      <field name="model">pingen.task</field>
      <field name="type">search</field>
      <field name="arch" type="xml">
        <search string="Pingen Task">
          <filter icon="terp-stage"
            string="Pending"
            domain="[('state','=','pending')]"/>
          <filter icon="terp-stock_align_left_24"
            string="Pushed"
            domain="[('state','=','pushed')]"/>
          <filter icon="terp-stock_align_left_24"
            string="Error"
            domain="[('state','=','error')]"/>
          <separator orientation="vertical"/>
          <field name="attachment_id" />
        </search>
      </field>
    </record>

    <record id="action_pingen_task" model="ir.actions.act_window">
      <field name="name">Pingen Tasks</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">pingen.task</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="search_view_id" ref="view_pingen_task_search"/>
    </record>

    <menuitem action="action_pingen_task" id="menu_pingen_task" parent="base.next_id_4"/>

  </data>
</openerp>
